# 🎉 unibest 3.11 了！快来看看新增了啥~

大家好，我是菲鸽，自从上次 6 月份发布 《🎉 unibest 3.0 发布了！看看都更新了啥好用的功能~》 已经过去 2 月了，现在已经更新到了 `v3.11.0`，来看看都新增了啥吧。

## 总览

- 【重构/新增】`tabbar` 策略
- 【优化】`多语言模板` 优化
- 【新增@v3.10】`登录LOGIN` 策略
- 【新增@v3.11】`root` 插件引入，支持全局 `App.ku.vue`, 并支持给 `vue组件` 传参！

## 一、`tabbar` 策略

`tabbar` 策略在 `v3.0` 是放在 `src/layouts/fg-tabbar/` 文件夹的, 后来在某个版本迁移到了 `src/tabbar/`，然后又优化了好几版。

- 自定义 tabbar 完全重写，不再依赖 `UI库`。（因为当时接入 `skyiee-ui` 的时候，它并没还有 `Tabbar 组件`，于是我就想着搞一个 `UI库` 无关的 `tabbar`。)
- 自定义 tabbar 支持 `badge` 展示，可以显示小红点和数字。
- 自定义 tabbar 支持手动切换 `badge` 的数量。
- 自定义 tabbar 支持 `中间鼓包TabbarItem` 的展示。

## 二、`多语言模板` 优化

基于上面的 `tabbar` 进行了多语言处理，同时还新出了了一下 2 个功能。

- tabbar 在切换多语言后，会自动处理多语言的文案切换。
- navbar 在切换多语言后，会自动处理多语言的文案切换。

这两个一直都需要用户自己处理的，现在 `unibest` 都帮您处理好了，请放心使用吧。

## 三、`登录LOGIN` 策略

跟 `tabbar` 的策略模式一样，登录也是支持策略选择的。

有些应用可以直接进入，有些应用必须要登录才能进入，这都可以通过选择不同的登录策略来实现。当前有 2 种策略：

- 默认无需登录策略： DEFAULT_NO_NEED_LOGIN
- 默认需要登录策略： DEFAULT_NEED_LOGIN

同时支持设置 `EXCLUDE_PAGE_LIST` 表示排除的路由列表，移除以前的 `needLogin` 字段的判断。

- 在 `默认无需登录策略： DEFAULT_NO_NEED_LOGIN` 中，只有路由在 `EXCLUDE_PAGE_LIST` 中，才需要登录，相当于黑名单。

- 在 `默认需要登录策略： DEFAULT_NEED_LOGIN` 中，只有路由在 `EXCLUDE_PAGE_LIST` 中，才不需要登录，相当于白名单。

除此之外，还配套实现了不同策略下的跳转逻辑，比如首页必须要登录才能进入，那就会默认去登录页，登录完后会自动重定向到首页。其他页面的重定向也做了处理，请放心使用。

鉴于代码跟之前的路由拦截器有关联，于是就一起放到 `src/router` 文件夹了。

```tree
- router
| - config.ts   ---- 主要的配置代码在这里
| - interceptor.ts
| - README.md
```

当然配套的代码还有 `pages/login/login` 和 `pages/me/me` 等文件，请查看源码。

## 四、`root` 插件引入

今天正式引入了 `shy` 哥的 `root` 插件，并打赏了他 `50元`。 现在 `unibest` 支持全局的根组件 `App.ku.vue`，里面还可以保留数据给下游 `vue` 组件使用，使用方式已经内置到了 `unibest` 的 `pages/about/about` 里面。

同时还做了一个重大优化：
去掉了 `layouts/tabbar.vue`, 并把 `FgTabbar` 内置到 `App.ku.vue` 里面，并通过判断当前页是否是 `tabbar 路由` 来自动显示隐藏，减少用户心智负担。

关键代码如下：

```html
<template>
  <KuRootView />
  <FgTabbar v-if="isCurrentPageTabbar" />
  ...其他代码
</template>
```

这个改动需要用户稍微适应一下，希望大家最后都会喜欢。

## 五、录制视频

目前录制了好几个视频，放到了 B 站，感兴趣的可以去看看，如果对您有帮助记得一件三连哈。

<https://www.bilibili.com/video/BV1omeJzDE8Z/?vd_source=59df4f5d6bca7e40fba5b30d7c8b1ce2>

![](https://files.mdnice.com/user/23743/79a6c094-4e22-4804-b835-219265049edd.png)

## 完

好了，很晚了， `00:20` 了， 睡了，各位晚安~~

---

`unibest` 唯一官网 <https://unibest.tech>

`unibest` 唯一正确仓库： <https://github.com/unibest-tech/unibest>
